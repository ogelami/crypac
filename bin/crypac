#!/usr/bin/env python3

import argparse, sys, copy, binascii, struct, crypac

parser = argparse.ArgumentParser(description = 'Process some integers.')
parser.add_argument('--verbose', action='store_true')
subparsers = parser.add_subparsers(dest='mode')

subparser_pack = subparsers.add_parser('pack')
subparsers.add_parser('unpack')

subparser_encrypt = subparsers.add_parser('encrypt')
subparser_encrypt.add_argument('key')
subparser_encrypt.add_argument('--generate-iv', action='store_true')

subparser_decrypt = subparsers.add_parser('decrypt')
subparser_decrypt.add_argument('--iv-prefix', action='store_true')
subparser_decrypt.add_argument('key')

subparser_convert = subparsers.add_parser('convert')
subparser_convert.add_argument('format', choices = ['wif', 'bip39'], help='convert from')
subparser_convert.add_argument('input')

for key, currency in crypac.currencies_s.items():
	subparser_pack.add_argument('--' + key, action = 'append', nargs = 1, metavar = 'hex{' + str(currency.size) + '}')

arguments = parser.parse_args()

crypac.arguments = arguments
crypac.argument_parser = parser
crypac.start()